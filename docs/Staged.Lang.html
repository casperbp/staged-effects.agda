<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Staged.Lang</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--overlapping-instances</a> <a id="37" class="Symbol">#-}</a>

<a id="42" class="Keyword">module</a> <a id="49" href="Staged.Lang.html" class="Module">Staged.Lang</a> <a id="61" class="Keyword">where</a>

<a id="68" class="Keyword">open</a> <a id="73" class="Keyword">import</a> <a id="80" href="Function.html" class="Module">Function</a>

<a id="90" class="Keyword">open</a> <a id="95" class="Keyword">import</a> <a id="102" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="111" class="Keyword">open</a> <a id="116" class="Keyword">import</a> <a id="123" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="132" class="Keyword">open</a> <a id="137" class="Keyword">import</a> <a id="144" href="Data.Maybe.html" class="Module">Data.Maybe</a>
<a id="155" class="Keyword">open</a> <a id="160" class="Keyword">import</a> <a id="167" href="Data.List.html" class="Module">Data.List</a>
<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Data.Product.html" class="Module">Data.Product</a>

<a id="203" class="Keyword">open</a> <a id="208" class="Keyword">import</a> <a id="215" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="254" class="Comment">-- Step 1: import basic library functionality</a>
<a id="300" class="Keyword">open</a> <a id="305" class="Keyword">import</a> <a id="312" href="Container.html" class="Module">Container</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Staged.Denote.html" class="Module">Staged.Denote</a>

<a id="349" class="Comment">-- Step 2: import effects</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Staged.Effects.Nat.html" class="Module">Staged.Effects.Nat</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Staged.Effects.State.html" class="Module">Staged.Effects.State</a>
<a id="439" class="Keyword">open</a> <a id="444" class="Keyword">import</a> <a id="451" href="Staged.Effects.Lambda.html" class="Module">Staged.Effects.Lambda</a>
<a id="473" class="Keyword">open</a> <a id="478" class="Keyword">import</a> <a id="485" href="Staged.Effects.Except.html" class="Module">Staged.Effects.Except</a>
<a id="507" class="Keyword">open</a> <a id="512" class="Keyword">import</a> <a id="519" href="Staged.Effects.NoOp.html" class="Module">Staged.Effects.NoOp</a>

<a id="540" class="Comment">-- Step 3: import object language constructors</a>
<a id="587" class="Keyword">open</a> <a id="592" class="Keyword">import</a> <a id="599" href="Staged.Expression.Nat.html" class="Module">Staged.Expression.Nat</a>
<a id="621" class="Keyword">open</a> <a id="626" class="Keyword">import</a> <a id="633" href="Staged.Expression.State.html" class="Module">Staged.Expression.State</a> <a id="657" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="659" class="Keyword">open</a> <a id="664" class="Keyword">import</a> <a id="671" href="Staged.Expression.Lambda.html" class="Module">Staged.Expression.Lambda</a>
<a id="696" class="Keyword">open</a> <a id="701" class="Keyword">import</a> <a id="708" href="Staged.Expression.Seq.html" class="Module">Staged.Expression.Seq</a>
<a id="730" class="Keyword">open</a> <a id="735" class="Keyword">import</a> <a id="742" href="Staged.Expression.Except.html" class="Module">Staged.Expression.Except</a>

<a id="768" class="Comment">-- Step 4: assemble eDSL</a>
<a id="793" class="Keyword">module</a> <a id="800" href="Staged.Lang.html#800" class="Module">_</a> <a id="802" class="Keyword">where</a>

  <a id="811" class="Comment">-- Choose a value type</a>
  <a id="836" class="Keyword">data</a> <a id="841" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="845" class="Symbol">:</a> <a id="847" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="851" class="Keyword">where</a>
    <a id="861" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a>  <a id="867" class="Symbol">:</a> <a id="869" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="871" class="Symbol">→</a> <a id="873" href="Staged.Lang.html#841" class="Datatype">Val</a>
    <a id="881" href="Staged.Lang.html#881" class="InductiveConstructor">vclos</a> <a id="887" class="Symbol">:</a> <a id="889" href="Staged.Effects.Lambda.html#1571" class="Datatype">Closure</a> <a id="897" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="901" class="Symbol">→</a> <a id="903" href="Staged.Lang.html#841" class="Datatype">Val</a>

  <a id="910" class="Keyword">instance</a> <a id="919" href="Staged.Lang.html#919" class="Function">ℕ⊂Val</a> <a id="925" class="Symbol">:</a> <a id="927" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="929" href="Staged.Value.Core.html#125" class="Record Operator">⊂</a> <a id="931" href="Staged.Lang.html#841" class="Datatype">Val</a>
  <a id="937" href="Staged.Value.Core.html#166" class="Field">_⊂_.injectᵛ</a> <a id="949" href="Staged.Lang.html#919" class="Function">ℕ⊂Val</a> <a id="955" class="Symbol">=</a> <a id="957" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a>
  <a id="964" href="Staged.Value.Core.html#195" class="Field">_⊂_.projectᵛ</a> <a id="977" href="Staged.Lang.html#919" class="Function">ℕ⊂Val</a> <a id="983" class="Symbol">(</a><a id="984" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="989" href="Staged.Lang.html#989" class="Bound">x</a><a id="990" class="Symbol">)</a> <a id="992" class="Symbol">=</a> <a id="994" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="999" href="Staged.Lang.html#989" class="Bound">x</a>
  <a id="1003" href="Staged.Value.Core.html#195" class="Field">_⊂_.projectᵛ</a> <a id="1016" href="Staged.Lang.html#919" class="Function">ℕ⊂Val</a> <a id="1022" class="Symbol">(</a><a id="1023" href="Staged.Lang.html#881" class="InductiveConstructor">vclos</a> <a id="1029" href="Staged.Lang.html#1029" class="Bound">x</a><a id="1030" class="Symbol">)</a> <a id="1032" class="Symbol">=</a> <a id="1034" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>

  <a id="1045" class="Keyword">instance</a> <a id="1054" href="Staged.Lang.html#1054" class="Function">Closure⊂Val</a> <a id="1066" class="Symbol">:</a> <a id="1068" href="Staged.Effects.Lambda.html#1571" class="Datatype">Closure</a> <a id="1076" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1080" href="Staged.Value.Core.html#125" class="Record Operator">⊂</a> <a id="1082" href="Staged.Lang.html#841" class="Datatype">Val</a>
  <a id="1088" href="Staged.Value.Core.html#166" class="Field">_⊂_.injectᵛ</a> <a id="1100" href="Staged.Lang.html#1054" class="Function">Closure⊂Val</a> <a id="1112" class="Symbol">=</a> <a id="1114" href="Staged.Lang.html#881" class="InductiveConstructor">vclos</a>
  <a id="1122" href="Staged.Value.Core.html#195" class="Field">_⊂_.projectᵛ</a> <a id="1135" href="Staged.Lang.html#1054" class="Function">Closure⊂Val</a> <a id="1147" class="Symbol">(</a><a id="1148" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="1153" href="Staged.Lang.html#1153" class="Bound">x</a><a id="1154" class="Symbol">)</a> <a id="1156" class="Symbol">=</a> <a id="1158" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
  <a id="1168" href="Staged.Value.Core.html#195" class="Field">_⊂_.projectᵛ</a> <a id="1181" href="Staged.Lang.html#1054" class="Function">Closure⊂Val</a> <a id="1193" class="Symbol">(</a><a id="1194" href="Staged.Lang.html#881" class="InductiveConstructor">vclos</a> <a id="1200" href="Staged.Lang.html#1200" class="Bound">x</a><a id="1201" class="Symbol">)</a> <a id="1203" class="Symbol">=</a> <a id="1205" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="1210" href="Staged.Lang.html#1200" class="Bound">x</a>


  <a id="1216" class="Comment">-- Compose Expression type</a>
  <a id="1245" href="Staged.Lang.html#1245" class="Function">Expr</a> <a id="1250" class="Symbol">=</a> <a id="1252" href="Container.html#301" class="Datatype">μ</a> <a id="1254" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1256" href="Staged.Expression.Seq.html#193" class="Function">SeqExpr</a> <a id="1264" href="Container.html#589" class="Function Operator">∪</a> <a id="1266" href="Staged.Expression.Except.html#415" class="Function">ExcExpr</a> <a id="1274" href="Container.html#589" class="Function Operator">∪</a> <a id="1276" href="Staged.Expression.Nat.html#205" class="Function">NatExpr</a> <a id="1284" href="Container.html#589" class="Function Operator">∪</a> <a id="1286" href="Staged.Expression.State.html#333" class="Function">StateExpr</a> <a id="1296" href="Container.html#589" class="Function Operator">∪</a> <a id="1298" href="Staged.Expression.Lambda.html#306" class="Function">LamExpr</a>


  <a id="1310" class="Comment">-- Compose effect signature</a>
  <a id="1340" href="Staged.Lang.html#1340" class="Function">LangSig</a> <a id="1348" class="Symbol">=</a> <a id="1350" href="Staged.Effects.Nat.html#396" class="Function">NatOpSig</a> <a id="1359" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1363" href="Staged.Denote.Sig.html#420" class="Function Operator">⊕</a> <a id="1365" href="Staged.Effects.State.html#424" class="Function">StateSig</a> <a id="1374" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1376" href="Staged.Denote.Sig.html#420" class="Function Operator">⊕</a> <a id="1378" href="Staged.Effects.Except.html#508" class="Function">ExcSig</a> <a id="1385" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1389" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1393" href="Staged.Denote.Sig.html#420" class="Function Operator">⊕</a> <a id="1395" href="Staged.Effects.Lambda.html#769" class="Function">LamSig</a> <a id="1402" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1406" href="Staged.Denote.Sig.html#420" class="Function Operator">⊕</a> <a id="1408" href="Staged.Effects.NoOp.html#116" class="Function">NoOpSig</a>


  <a id="1420" class="Comment">-- Build semantic function</a>
  <a id="1449" href="Staged.Lang.html#1449" class="Function Operator">⟦_⟧</a> <a id="1453" class="Symbol">:</a> <a id="1455" href="Staged.Lang.html#1245" class="Function">Expr</a> <a id="1460" class="Symbol">→</a> <a id="1462" href="Staged.Denote.Tree.html#206" class="Datatype">Tree</a> <a id="1467" href="Function.Base.html#615" class="Function">id</a> <a id="1470" href="Staged.Lang.html#1340" class="Function">LangSig</a> <a id="1478" href="Staged.Lang.html#841" class="Datatype">Val</a>
  <a id="1484" href="Staged.Lang.html#1449" class="Function Operator">⟦_⟧</a> <a id="1488" class="Symbol">=</a> <a id="1490" href="Staged.Denote.Tree.html#1499" class="Function Operator">⟪</a> <a id="1492" href="Staged.Expression.Seq.html#282" class="Function">⟦seq⟧</a> <a id="1498" href="Staged.Denote.Tree.html#1595" class="Function Operator">`⊙</a> <a id="1501" href="Staged.Expression.Except.html#575" class="Function">⟦except⟧</a> <a id="1510" href="Staged.Denote.Tree.html#1595" class="Function Operator">`⊙</a> <a id="1513" href="Staged.Expression.Nat.html#292" class="Function">⟦nat⟧</a> <a id="1519" href="Staged.Denote.Tree.html#1595" class="Function Operator">`⊙</a> <a id="1522" href="Staged.Expression.State.html#515" class="Function">⟦state⟧</a> <a id="1530" href="Staged.Denote.Tree.html#1595" class="Function Operator">`⊙</a> <a id="1533" href="Staged.Expression.Lambda.html#603" class="Function">⟦lambda⟧</a> <a id="1542" href="Staged.Denote.Tree.html#1499" class="Function Operator">⟫</a>

  <a id="1547" class="Comment">-- Define handler application</a>
  <a id="1579" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="1587" class="Symbol">:</a> <a id="1589" href="Staged.Denote.Tree.html#206" class="Datatype">Tree</a> <a id="1594" href="Function.Base.html#615" class="Function">id</a> <a id="1597" href="Staged.Lang.html#1340" class="Function">LangSig</a> <a id="1605" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1609" class="Symbol">→</a> <a id="1611" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="1613" class="Symbol">→</a> <a id="1615" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="1621" class="Symbol">(</a><a id="1622" href="Staged.Lang.html#841" class="Datatype">Val</a> <a id="1626" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="1628" href="Staged.Lang.html#841" class="Datatype">Val</a><a id="1631" class="Symbol">)</a>
  <a id="1635" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="1643" href="Staged.Lang.html#1643" class="Bound">x</a> <a id="1645" href="Staged.Lang.html#1645" class="Bound">n</a> <a id="1647" class="Keyword">with</a> <a id="1652" href="Staged.Effects.Lambda.html#2182" class="Function">hLam&#39;</a> <a id="1658" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1661" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1664" href="Staged.Lang.html#1645" class="Bound">n</a> <a id="1666" class="Symbol">(</a><a id="1667" href="Staged.Effects.Except.html#1043" class="Function">hEx</a> <a id="1671" class="Symbol">(</a><a id="1672" href="Staged.Effects.State.html#584" class="Function">hSt&#39;&#39;</a> <a id="1678" class="Number">0</a> <a id="1680" class="Symbol">(</a><a id="1681" href="Staged.Effects.Nat.html#613" class="Function">hNat&#39;</a> <a id="1687" href="Staged.Lang.html#1643" class="Bound">x</a><a id="1688" class="Symbol">)))</a>
  <a id="1694" class="Symbol">...</a> <a id="1698" class="Symbol">|</a> <a id="1700" href="Staged.Denote.Tree.html#264" class="InductiveConstructor">leaf</a> <a id="1705" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a> <a id="1713" class="Symbol">=</a> <a id="1715" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
  <a id="1725" class="Symbol">...</a> <a id="1729" class="Symbol">|</a> <a id="1731" href="Staged.Denote.Tree.html#264" class="InductiveConstructor">leaf</a> <a id="1736" class="Symbol">(</a><a id="1737" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="1742" class="Symbol">(_</a> <a id="1745" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1747" class="Symbol">(</a><a id="1748" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1753" class="Symbol">(_</a> <a id="1756" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1758" href="Staged.Lang.html#1758" class="Bound">v</a><a id="1759" class="Symbol">))))</a> <a id="1764" class="Symbol">=</a> <a id="1766" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="1771" class="Symbol">(</a><a id="1772" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="1777" href="Staged.Lang.html#1758" class="Bound">v</a><a id="1778" class="Symbol">)</a>
  <a id="1782" class="Symbol">...</a> <a id="1786" class="Symbol">|</a> <a id="1788" href="Staged.Denote.Tree.html#264" class="InductiveConstructor">leaf</a> <a id="1793" class="Symbol">(</a><a id="1794" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="1799" class="Symbol">(_</a> <a id="1802" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1804" class="Symbol">(</a><a id="1805" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1810" class="Symbol">(_</a> <a id="1813" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1815" href="Staged.Lang.html#1815" class="Bound">v</a><a id="1816" class="Symbol">))))</a> <a id="1821" class="Symbol">=</a> <a id="1823" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="1828" class="Symbol">(</a><a id="1829" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="1834" href="Staged.Lang.html#1815" class="Bound">v</a><a id="1835" class="Symbol">)</a>


<a id="1839" class="Comment">-- Step 5: profit</a>
<a id="1857" class="Keyword">module</a> <a id="1864" href="Staged.Lang.html#1864" class="Module">_</a> <a id="1866" class="Keyword">where</a> 

  <a id="1876" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="1879" href="Staged.Lang.html#1879" class="Function">`y</a> <a id="1882" href="Staged.Lang.html#1882" class="Function">`z</a> <a id="1885" href="Staged.Lang.html#1885" class="Function">`u</a> <a id="1888" href="Staged.Lang.html#1888" class="Function">`v</a> <a id="1891" href="Staged.Lang.html#1891" class="Function">`w</a> <a id="1894" class="Symbol">:</a> <a id="1896" href="Staged.Effects.Lambda.html#588" class="Function">Name</a>
  <a id="1903" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="1906" class="Symbol">=</a> <a id="1908" class="Number">0</a>
  <a id="1912" href="Staged.Lang.html#1879" class="Function">`y</a> <a id="1915" class="Symbol">=</a> <a id="1917" class="Number">1</a>
  <a id="1921" href="Staged.Lang.html#1882" class="Function">`z</a> <a id="1924" class="Symbol">=</a> <a id="1926" class="Number">2</a>
  <a id="1930" href="Staged.Lang.html#1885" class="Function">`u</a> <a id="1933" class="Symbol">=</a> <a id="1935" class="Number">3</a>
  <a id="1939" href="Staged.Lang.html#1888" class="Function">`v</a> <a id="1942" class="Symbol">=</a> <a id="1944" class="Number">4</a>
  <a id="1948" href="Staged.Lang.html#1891" class="Function">`w</a> <a id="1951" class="Symbol">=</a> <a id="1953" class="Number">5</a>

  <a id="1958" class="Comment">-- put 1 &gt;&gt; let x = put 10 in get  </a>
  <a id="1996" href="Staged.Lang.html#1996" class="Function">example₀</a> <a id="2005" class="Symbol">:</a> <a id="2007" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2014" href="Staged.Lang.html#1996" class="Function">example₀</a> <a id="2023" class="Symbol">=</a> <a id="2025" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="2030" class="Symbol">(</a><a id="2031" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2036" class="Number">1</a><a id="2037" class="Symbol">)</a> <a id="2039" href="Staged.Expression.Seq.html#370" class="Function Operator">&gt;&gt;&#39;</a> <a id="2043" href="Staged.Expression.Lambda.html#1324" class="Function">let&#39;</a> <a id="2048" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="2051" class="Symbol">(</a><a id="2052" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="2057" class="Symbol">(</a><a id="2058" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2063" class="Number">10</a><a id="2065" class="Symbol">))</a> <a id="2068" href="Staged.Expression.State.html#881" class="Function">get&#39;</a>

  <a id="2076" href="Staged.Lang.html#2076" class="Function">ut₀</a> <a id="2080" class="Symbol">:</a> <a id="2082" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="2090" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="2092" href="Staged.Lang.html#1996" class="Function">example₀</a> <a id="2101" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="2103" class="Number">5</a> <a id="2105" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2107" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="2112" class="Symbol">(</a><a id="2113" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2118" class="Symbol">(</a><a id="2119" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="2124" class="Number">10</a><a id="2126" class="Symbol">))</a>
  <a id="2131" href="Staged.Lang.html#2076" class="Function">ut₀</a> <a id="2135" class="Symbol">=</a> <a id="2137" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2145" class="Comment">-- put 1 &gt;&gt;&#39; let x = λ y → put 10 in get </a>
  <a id="2189" href="Staged.Lang.html#2189" class="Function">example₁</a> <a id="2198" class="Symbol">:</a> <a id="2200" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2207" href="Staged.Lang.html#2189" class="Function">example₁</a> <a id="2216" class="Symbol">=</a> <a id="2218" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="2223" class="Symbol">(</a><a id="2224" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2229" class="Number">1</a><a id="2230" class="Symbol">)</a> <a id="2232" href="Staged.Expression.Seq.html#370" class="Function Operator">&gt;&gt;&#39;</a> <a id="2236" href="Staged.Expression.Lambda.html#1324" class="Function">let&#39;</a> <a id="2241" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="2244" class="Symbol">(</a><a id="2245" href="Staged.Expression.Lambda.html#1115" class="Function">abs&#39;</a> <a id="2250" href="Staged.Lang.html#1879" class="Function">`y</a> <a id="2253" class="Symbol">(</a><a id="2254" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="2259" class="Symbol">(</a><a id="2260" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2265" class="Number">10</a><a id="2267" class="Symbol">)))</a> <a id="2271" href="Staged.Expression.State.html#881" class="Function">get&#39;</a>

  <a id="2279" href="Staged.Lang.html#2279" class="Function">ut₁</a> <a id="2283" class="Symbol">:</a> <a id="2285" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="2293" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="2295" href="Staged.Lang.html#2189" class="Function">example₁</a> <a id="2304" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="2306" class="Number">5</a> <a id="2308" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2310" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="2315" class="Symbol">(</a><a id="2316" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2321" class="Symbol">(</a><a id="2322" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="2327" class="Number">1</a><a id="2328" class="Symbol">))</a>
  <a id="2333" href="Staged.Lang.html#2279" class="Function">ut₁</a> <a id="2337" class="Symbol">=</a> <a id="2339" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2347" href="Staged.Lang.html#2347" class="Function">example₂</a> <a id="2356" class="Symbol">:</a> <a id="2358" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2365" href="Staged.Lang.html#2347" class="Function">example₂</a> <a id="2374" class="Symbol">=</a> <a id="2376" href="Staged.Expression.Lambda.html#1208" class="Function">app&#39;</a> <a id="2381" class="Symbol">(</a><a id="2382" href="Staged.Expression.Lambda.html#1115" class="Function">abs&#39;</a> <a id="2387" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="2390" class="Symbol">(</a><a id="2391" href="Staged.Expression.Lambda.html#1034" class="Function">var&#39;</a> <a id="2396" href="Staged.Lang.html#1876" class="Function">`x</a><a id="2398" class="Symbol">))</a> <a id="2401" class="Symbol">(</a><a id="2402" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2407" class="Number">4</a><a id="2408" class="Symbol">)</a>

  <a id="2413" href="Staged.Lang.html#2413" class="Function">ut₂</a> <a id="2417" class="Symbol">:</a> <a id="2419" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="2427" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="2429" href="Staged.Lang.html#2347" class="Function">example₂</a> <a id="2438" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="2440" class="Number">4</a> <a id="2442" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2444" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="2449" class="Symbol">(</a><a id="2450" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2455" class="Symbol">(</a><a id="2456" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="2461" class="Number">4</a><a id="2462" class="Symbol">))</a>
  <a id="2467" href="Staged.Lang.html#2413" class="Function">ut₂</a> <a id="2471" class="Symbol">=</a> <a id="2473" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2481" href="Staged.Lang.html#2481" class="Function">example₃</a> <a id="2490" class="Symbol">:</a> <a id="2492" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2499" href="Staged.Lang.html#2481" class="Function">example₃</a> <a id="2508" class="Symbol">=</a> <a id="2510" href="Staged.Expression.Lambda.html#1324" class="Function">let&#39;</a> <a id="2515" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="2518" class="Symbol">(</a><a id="2519" href="Staged.Expression.Lambda.html#1115" class="Function">abs&#39;</a> <a id="2524" href="Staged.Lang.html#1879" class="Function">`y</a> <a id="2527" class="Symbol">(</a><a id="2528" href="Staged.Expression.Lambda.html#1034" class="Function">var&#39;</a> <a id="2533" href="Staged.Lang.html#1879" class="Function">`y</a><a id="2535" class="Symbol">))</a> <a id="2538" class="Symbol">(</a><a id="2539" href="Staged.Expression.Lambda.html#1208" class="Function">app&#39;</a> <a id="2544" class="Symbol">(</a><a id="2545" href="Staged.Expression.Lambda.html#1034" class="Function">var&#39;</a> <a id="2550" href="Staged.Lang.html#1876" class="Function">`x</a><a id="2552" class="Symbol">)</a> <a id="2554" class="Symbol">(</a><a id="2555" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2560" class="Number">5</a><a id="2561" class="Symbol">))</a>
  
  <a id="2569" href="Staged.Lang.html#2569" class="Function">ut₃</a> <a id="2573" class="Symbol">:</a> <a id="2575" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="2583" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="2585" href="Staged.Lang.html#2481" class="Function">example₃</a> <a id="2594" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="2596" class="Number">6</a> <a id="2598" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2600" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2611" class="Symbol">(</a><a id="2612" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="2617" class="Number">5</a><a id="2618" class="Symbol">))</a>
  <a id="2623" href="Staged.Lang.html#2569" class="Function">ut₃</a> <a id="2627" class="Symbol">=</a> <a id="2629" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2637" href="Staged.Lang.html#2637" class="Function">example₄</a> <a id="2646" class="Symbol">:</a> <a id="2648" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2655" href="Staged.Lang.html#2637" class="Function">example₄</a> <a id="2664" class="Symbol">=</a>
    <a id="2670" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="2675" class="Symbol">(</a><a id="2676" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2681" class="Number">0</a><a id="2682" class="Symbol">)</a> <a id="2684" href="Staged.Expression.Seq.html#370" class="Function Operator">&gt;&gt;&#39;</a>
    <a id="2692" href="Staged.Expression.Lambda.html#1324" class="Function">let&#39;</a> <a id="2697" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="2700" class="Symbol">(</a><a id="2701" href="Staged.Expression.Lambda.html#1115" class="Function">abs&#39;</a> <a id="2706" href="Staged.Lang.html#1879" class="Function">`y</a> <a id="2709" href="Staged.Expression.State.html#881" class="Function">get&#39;</a><a id="2713" class="Symbol">)</a> <a id="2715" class="Symbol">(</a><a id="2716" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="2721" class="Symbol">(</a><a id="2722" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2727" class="Number">42</a><a id="2729" class="Symbol">)</a> <a id="2731" href="Staged.Expression.Seq.html#370" class="Function Operator">&gt;&gt;&#39;</a> <a id="2735" href="Staged.Expression.Lambda.html#1208" class="Function">app&#39;</a> <a id="2740" class="Symbol">(</a><a id="2741" href="Staged.Expression.Lambda.html#1034" class="Function">var&#39;</a> <a id="2746" href="Staged.Lang.html#1876" class="Function">`x</a><a id="2748" class="Symbol">)</a> <a id="2750" class="Symbol">(</a><a id="2751" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2756" class="Number">0</a><a id="2757" class="Symbol">))</a>

  <a id="2763" href="Staged.Lang.html#2763" class="Function">ut₄</a> <a id="2767" class="Symbol">:</a> <a id="2769" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="2777" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="2779" href="Staged.Lang.html#2637" class="Function">example₄</a> <a id="2788" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="2790" class="Number">5</a> <a id="2792" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2794" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="2799" class="Symbol">(</a><a id="2800" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="2805" class="Symbol">(</a><a id="2806" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="2811" class="Number">42</a><a id="2813" class="Symbol">))</a>
  <a id="2818" href="Staged.Lang.html#2763" class="Function">ut₄</a> <a id="2822" class="Symbol">=</a> <a id="2824" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2832" href="Staged.Lang.html#2832" class="Function">example₅</a> <a id="2841" class="Symbol">:</a> <a id="2843" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2850" href="Staged.Lang.html#2832" class="Function">example₅</a> <a id="2859" class="Symbol">=</a>
    <a id="2865" href="Staged.Expression.Except.html#880" class="Function">throw&#39;</a> <a id="2872" class="Symbol">(</a><a id="2873" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="2878" class="Number">12</a><a id="2880" class="Symbol">)</a>

  <a id="2885" href="Staged.Lang.html#2885" class="Function">ut₅</a> <a id="2889" class="Symbol">:</a> <a id="2891" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="2899" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="2901" href="Staged.Lang.html#2832" class="Function">example₅</a> <a id="2910" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="2912" class="Number">2</a> <a id="2914" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2916" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="2921" class="Symbol">(</a><a id="2922" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="2927" class="Symbol">(</a><a id="2928" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="2933" class="Number">12</a><a id="2935" class="Symbol">))</a>
  <a id="2940" href="Staged.Lang.html#2885" class="Function">ut₅</a> <a id="2944" class="Symbol">=</a> <a id="2946" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="2954" href="Staged.Lang.html#2954" class="Function">example₆</a> <a id="2963" class="Symbol">:</a> <a id="2965" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="2972" href="Staged.Lang.html#2954" class="Function">example₆</a> <a id="2981" class="Symbol">=</a>
    <a id="2987" href="Staged.Expression.Except.html#960" class="Function">catch&#39;</a> <a id="2994" class="Symbol">(</a><a id="2995" href="Staged.Expression.Except.html#880" class="Function">throw&#39;</a> <a id="3002" class="Symbol">(</a><a id="3003" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="3008" class="Number">6</a><a id="3009" class="Symbol">))</a> <a id="3012" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="3015" class="Symbol">(</a><a id="3016" href="Staged.Expression.Lambda.html#1034" class="Function">var&#39;</a> <a id="3021" href="Staged.Lang.html#1876" class="Function">`x</a><a id="3023" class="Symbol">)</a>

  <a id="3028" href="Staged.Lang.html#3028" class="Function">ut₆</a> <a id="3032" class="Symbol">:</a> <a id="3034" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="3042" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="3044" href="Staged.Lang.html#2954" class="Function">example₆</a> <a id="3053" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="3055" class="Number">6</a> <a id="3057" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3059" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="3064" class="Symbol">(</a><a id="3065" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="3070" class="Symbol">(</a><a id="3071" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="3076" class="Number">6</a><a id="3077" class="Symbol">))</a>
  <a id="3082" href="Staged.Lang.html#3028" class="Function">ut₆</a> <a id="3086" class="Symbol">=</a> <a id="3088" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>

  <a id="3096" href="Staged.Lang.html#3096" class="Function">example₇</a> <a id="3105" class="Symbol">:</a> <a id="3107" href="Staged.Lang.html#1245" class="Function">Expr</a>
  <a id="3114" href="Staged.Lang.html#3096" class="Function">example₇</a> <a id="3123" class="Symbol">=</a> 
    <a id="3130" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="3135" class="Symbol">(</a><a id="3136" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="3141" class="Number">0</a><a id="3142" class="Symbol">)</a> <a id="3144" href="Staged.Expression.Seq.html#370" class="Function Operator">&gt;&gt;&#39;</a>
    <a id="3152" href="Staged.Expression.Except.html#960" class="Function">catch&#39;</a> <a id="3159" class="Symbol">(</a><a id="3160" href="Staged.Expression.State.html#945" class="Function">put&#39;</a> <a id="3165" class="Symbol">(</a><a id="3166" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="3171" class="Number">1</a><a id="3172" class="Symbol">)</a> <a id="3174" href="Staged.Expression.Seq.html#370" class="Function Operator">&gt;&gt;&#39;</a> <a id="3178" href="Staged.Expression.Except.html#880" class="Function">throw&#39;</a> <a id="3185" class="Symbol">(</a><a id="3186" href="Staged.Expression.Nat.html#456" class="Function">nat&#39;</a> <a id="3191" class="Number">2</a><a id="3192" class="Symbol">))</a> <a id="3195" href="Staged.Lang.html#1876" class="Function">`x</a> <a id="3198" href="Staged.Expression.State.html#881" class="Function">get&#39;</a>

  <a id="3206" href="Staged.Lang.html#3206" class="Function">ut₇</a> <a id="3210" class="Symbol">:</a> <a id="3212" href="Staged.Lang.html#1579" class="Function">operate</a> <a id="3220" href="Staged.Lang.html#1449" class="Function Operator">⟦</a> <a id="3222" href="Staged.Lang.html#3096" class="Function">example₇</a> <a id="3231" href="Staged.Lang.html#1449" class="Function Operator">⟧</a> <a id="3233" class="Number">6</a> <a id="3235" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="3237" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="3242" class="Symbol">(</a><a id="3243" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="3248" class="Symbol">(</a><a id="3249" href="Staged.Lang.html#861" class="InductiveConstructor">vnat</a> <a id="3254" class="Number">1</a><a id="3255" class="Symbol">))</a>
  <a id="3260" href="Staged.Lang.html#3206" class="Function">ut₇</a> <a id="3264" class="Symbol">=</a> <a id="3266" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
</pre></body></html>